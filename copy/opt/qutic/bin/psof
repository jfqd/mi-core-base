#!/usr/bin/bash
#
# Show number of open files per process
#
(cd /proc ; for i in *; do OF=`pfiles $i 2>/dev/null | nawk '/[0-9]: /{a++}END{print a}'`; [[ ! -z "$OF" ]] && echo "$OF files `ps -p $i -o comm=` $i"; done | sort -n)
